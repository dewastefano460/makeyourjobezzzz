<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRIME - PPPoE Provisioning</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <header class="page-header">
        <div class="header-container">
            <a href="index.html" class="back-button">Back</a>
            <a href="index.html" class="back-button home">Home</a>
        </div>
    </header>

    <main class="content-container">
        <h1 class="page-title">Terminator</h1>

        <section class="form-section">
            <h2 class="section-title">INPUT</h2>
            <div class="input-grid">
                <div class="form-group">
                    <label for="nama-klien">Nama Vlan</label>
                    <input type="text" id="nama-klien">
                </div>
                <div class="form-group">
                    <label for="ip-address">IP Address</label>
                    <input type="text" id="ip-address" placeholder="Sertakan CIDR">
                </div>
            </div>
        </section>
        
        <div class="action-buttons-container">
            <button id="convert-script-btn" class="form-button primary">CONVERT SCRIPT</button>
            <button id="clear-btn" class="form-button secondary">CLEAR</button>
        </div>

        <section class="form-section">
            <h2 class="section-title">OUTPUT DR.KSP</h2>
            <textarea id="output-script" readonly placeholder="Hasil script akan muncul di sini setelah klik 'Convert Script'..."></textarea>
        </section>

        <div class="copy-button-container">
            <button id="copy-script-btn" class="form-button copy">COPY SCRIPT</button>
        </div>

		<section class="form-section-summary">
            <h2 class="section-title">OUTPUT DR.FO1</h2>
            <textarea id="output-script-summary" readonly placeholder="Output untuk DR.NCDC  ..."></textarea>
        </section>

        <div class="copy-button-container">
            <button id="copy-script-btn-summary" class="form-button copy">COPY OUTPUT NCDC</button>
        </div>

		<section class="form-section-summary2">
            <h2 class="section-title">OUTPUT DR.FO2</h2>
            <textarea id="output-script-summary2" readonly placeholder="Output untuk DR.NCDC  ..."></textarea>
        </section>

        <div class="copy-button-container">
            <button id="copy-script-btn-summary2" class="form-button copy">COPY OUTPUT NCDC</button>
        </div>

    </main>

    <script>
        // --- 1. Mendapatkan semua elemen dari HTML ---
        const namaKlienEl = document.getElementById('nama-klien');
        const ipAddressEl = document.getElementById('ip-address');
        const outputScriptEl = document.getElementById('output-script');
		const outputSummaryEl = document.getElementById('output-script-summary');
		const outputSummary2El = document.getElementById('output-script-summary2');
        const convertScriptBtn = document.getElementById('convert-script-btn');
        const copyScriptBtn = document.getElementById('copy-script-btn');
		const copyScriptBtnSummary = document.getElementById('copy-script-btn-summary');
		const copyScriptBtnSummary2 = document.getElementById('copy-script-btn-summary2');
        const clearBtn = document.getElementById('clear-btn'); // BARU

       
        // --- BARU: Fungsi untuk membersihkan semua input dan output ---
        function clearForm() {
            namaKlienEl.value = '';
            ipAddressEl.value = '';
            outputScriptEl.value = '';
			outputSummaryEl.value = '';
			outputSummary2El.value = '';
            // Fokuskan kembali ke input pertama untuk kemudahan
            namaKlienEl.focus();
        }

        // BARU: Tambahkan event listener untuk tombol clear
        clearBtn.addEventListener('click', clearForm);

        convertScriptBtn.addEventListener('click', () => {
            const namaKlien = namaKlienEl.value;
            const ipAddress = ipAddressEl.value;            
            if (!namaKlien || !ipAddress) {
                alert('Harap isi semua kolom input yang diperlukan!');
                return;
            }

            const finalScript = `/interface vlan remove [find where name="${namaKlien}"]
/queue simple remove [find where target="${ipAddress}"]`;

            outputScriptEl.value = finalScript;

            const summaryScript = `/interface vlan remove [find where name="DR1---${namaKlien}"]
/queue simple remove [find where target="${ipAddress}"]`;

            outputSummaryEl.value = summaryScript;

            const summary2Script = `/interface vlan remove [find where name="DR2---${namaKlien}"]
/queue simple remove [find where target="${ipAddress}"]`;

            outputSummary2El.value = summary2Script;
        });
        
        copyScriptBtn.addEventListener('click', () => {
            if (!outputScriptEl.value) {
                alert('Tidak ada script untuk disalin!');
                return;
            }
            navigator.clipboard.writeText(outputScriptEl.value).then(() => {
                const originalText = copyScriptBtn.textContent;
                copyScriptBtn.textContent = 'COPIED!';
                copyScriptBtn.style.backgroundColor = '#28a745';
                
                setTimeout(() => {
                    copyScriptBtn.textContent = originalText;
                    copyScriptBtn.style.backgroundColor = '';
                }, 2000);
                
            }).catch(err => {
                alert('Gagal menyalin script: ', err);
            });
        });
		
        copyScriptBtnSummary.addEventListener('click', () => {
            if (!outputSummaryEl.value) {
                alert('Tidak ada script untuk disalin!');
                return;
            }
            navigator.clipboard.writeText(outputSummaryEl.value).then(() => {
                const originalText = copyScriptBtnSummary.textContent;
                copyScriptBtnSummary.textContent = 'COPIED!';
                copyScriptBtnSummary.style.backgroundColor = '#28a745';
                
                setTimeout(() => {
                    copyScriptBtnSummary.textContent = originalText;
                    copyScriptBtnSummary.backgroundColor = '';
                }, 2000);
                
            }).catch(err => {
                alert('Gagal menyalin script: ', err);
            });
        });

        copyScriptBtnSummary2.addEventListener('click', () => {
            if (!outputSummary2El.value) {
                alert('Tidak ada script untuk disalin!');
                return;
            }
            navigator.clipboard.writeText(outputSummary2El.value).then(() => {
                const originalText = copyScriptBtnSummary2.textContent;
                copyScriptBtnSummary2.textContent = 'COPIED!';
                copyScriptBtnSummary2.style.backgroundColor = '#28a745';
                
                setTimeout(() => {
                    copyScriptBtnSummary2.textContent = originalText;
                    copyScriptBtnSummary2.style.backgroundColor = '';
                }, 2000);
                
            }).catch(err => {
                alert('Gagal menyalin script: ', err);
            });
        });


    </script>

</body>
</html>